<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="images/favicon.png">

    <title>ICO | Lynked.World</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/owl.carousel.min.css" rel="stylesheet">
    <link href="css/ico.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">

</head>

<body class="auth-page">

    <main role="main">
        <section class="signin-signup">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-5">
                        <img src="images/logo.png" class="img-fluid auth-logo center-block">
                        <div class="signin-form auth-form">
                            <!-- <form class="social-logins" action="/login" method="post"> -->
                                <!-- <button type="submit" class="btn-social facebook-login" name="provider" value="Facebook"><img src="images/fb.png" class="float-left"><span>Sign up with Facebook</span></button>
                                <button type="submit" class="btn-social google-login" name="provider" value="Google"><img src="images/google.png" class="float-left"><span>Sign up with Google</span></button> -->
                    
                            <!-- </form> -->

                            <form id="signin" class="social-logins" action="/login"  method="post">

								<button type="submit" class="btn-social lynkedworld-login" name="provider" value="Lynked"><img src="images/lynkedworld.png" class="float-left"><span>Sign up with Lynked.World</span></button>
								<!-- Login with LW QR Start -->
								<div id="lw_login_qr" class="lynked.world" >
									<style>
										.qrbox {
											max-width: 250px;
											margin: 0 auto;
											width: 100%;
											background-color: #fff;
											position: relative;
										}
										.qrbox span {
											position: absolute;
											top: 50%;
											left: 50%;
											transform: translate(-50%, -50%);
										}
									</style>
									<div class="qrbox">
										<div class="qr_code">
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 39"><path d="M1 1h7v7h-7zM11 1h2v2h5v1h1v-1h-1v-1h2v3h-1v2h-1v1h-1v-3h-1v1h-1v-1h-1v1h-1v-2h-3v1h2v1h1v1h-1v3h1v-3h1v1h1v-1h1v2h-2v1h1v1h1v-2h2v1h-1v1h2v1h-2v2h-1v-1h-1v-1h-2v-1h-2v-1h-1v-1h-1v-6h1v-1h1v1h1v-1h-1zM14 1h2v1h-2zM22 1h1v1h1v3h-1v-1h-1v-1h-1v-1h1zM24 1h1v1h-1zM29 1h1v2h-1v1h-2v-1h1v-1h1zM31 1h7v7h-7zM2 2v5h5v-5zM25 2h1v2h1v1h-2zM32 2v5h5v-5zM3 3h3v3h-3zM33 3h3v3h-3zM21 4h1v1h-1zM29 4h1v1h-1zM20 5h1v1h-1zM22 5h1v1h-1zM24 5h1v1h-1zM27 5h1v1h1v1h-1v1h-1zM10 6v2h1v-2zM14 6h1v1h-1zM21 6h1v2h-1zM25 6h1v3h-2v-1h1zM19 7h1v2h-2v-1h1zM23 7h1v1h-1zM29 7h1v1h-1zM22 8h1v1h-1zM1 9h1v1h-1zM3 9h5v1h-2v1h-1v1h-1v-1h-1zM20 9h1v1h-1zM23 9h1v1h-1zM26 9h1v1h-1zM28 9h2v1h-2zM31 9h5v2h-1v1h-2v-1h1v-1h-1v1h-1v-1h-1zM19 10h1v1h-1zM21 10h2v1h-2zM24 10h2v1h-2zM27 10h1v1h2v1h-4v-1h1zM1 11h2v1h-1v2h1v1h-2zM7 11h1v1h-1zM9 11h2v1h-1v3h1v1h3v1h2v1h-1v1h1v3h-1v1h3v-1h-1v-2h1v1h1v1h2v1h-2v1h1v1h-2v1h-1v1h1v1h-1v1h3v-1h-1v-2h1v1h1v1h1v-1h-1v-1h1v-2h1v3h1v1h-1v1h-2v1h1v1h-2v-1h-5v-1h1v-1h-1v-1h-1v-1h-2v-1h1v-1h1v-1h-2v-1h2v-1h1v-1h-1v1h-2v1h-1v1h1v1h-2v-3h1v-2h1v1h1v-1h-1v-1h-1v-1h-2v-1h-4v-1h3v-1h1zM20 11h1v1h2v1h-1v1h-1v1h-1v1h-1v-2h1v-1h-1v-1h1zM31 11h1v1h1v1h3v1h-1v1h-1v-1h-3zM36 11h2v3h-1v-2h-1zM3 12h1v1h-1zM6 12h1v1h1v1h-2zM12 12h1v2h-1zM4 13h1v1h-1zM14 13h1v2h-1zM18 13h1v1h-1zM23 13h1v1h-1zM26 13h1v1h1v1h-4v-1h2zM28 13h2v1h-2zM17 14h1v1h-1zM22 14h1v1h-1zM30 14h1v1h-1zM36 14h1v1h-1zM15 15h2v2h-1v-1h-1zM28 15h1v1h1v1h-1v1h-1zM31 15h1v1h-1zM33 15h1v1h-1zM37 15h1v1h-1zM2 16h3v1h-1v1h-1v-1h-1zM22 16h4v1h1v1h-2v-1h-3zM32 16h1v1h-1zM34 16h1v1h-1zM5 17h1v1h-1zM7 17h1v1h-1zM19 17h3v1h-3zM31 17h1v1h-1zM33 17h1v1h-1zM35 17h3v1h-1v1h-1v-1h-1zM4 18h1v1h-1zM16 18h2v1h-2zM22 18h3v1h-1v1h-1v-1h-1zM27 18h1v1h-1zM29 18h2v1h-1v2h-1v-1h-1v-1h1zM32 18h1v1h-1zM1 19h3v1h-3zM7 19h1v1h-1zM21 19h1v1h-1zM26 19h1v1h-1zM31 19h1v1h-1zM33 19h3v1h-1v1h-1v-1h-1zM37 19h1v3h-1v-1h-1v-1h1zM4 20h3v1h-1v1h-2zM9 20h1v1h-1zM22 20h1v1h-1zM24 20h2v1h-2zM27 20h1v1h-1zM2 21h1v1h-1zM7 21h1v1h-1zM21 21h1v1h-1zM26 21h1v1h-1zM28 21h1v1h-1zM31 21h1v1h-1zM33 21h1v1h-1zM35 21h1v1h-1zM3 22h1v1h-1zM22 22h4v1h-4zM27 22h1v1h-1zM29 22h2v1h-2zM32 22h1v1h-1zM36 22h1v1h-1zM1 23h1v1h-1zM6 23h2v1h-2zM21 23h1v1h-1zM26 23h1v1h-1zM28 23h1v1h-1zM31 23h1v2h4v1h-1v1h-1v-1h-3zM33 23h1v1h-1zM35 23h1v1h-1zM37 23h1v1h-1zM2 24h2v1h1v1h-3zM9 24h1v1h-1zM15 24v1h1v-1zM6 25h2v1h-1v1h-1v2h-1v1h-1v-1h-1v-1h2v-2h1zM10 25h1v3h1v1h-2zM25 25h5v1h-5zM37 25h1v1h-1zM1 26h1v4h-1zM8 26h1v1h-1zM24 26h1v1h-1zM30 26h1v1h1v1h-2zM36 26h1v1h-1zM7 27h1v1h-1zM13 27h1v2h-1zM25 27h4v1h-3v1h8v2h1v2h-1v2h-1v-1h-1v1h-1v-1h-3v-1h-1v-1h2v-2h-4v-1h-1v-1h1zM33 27h1v1h-1zM35 27h1v1h-1zM37 27h1v1h-1zM8 28h1v1h-1zM34 28h1v1h-1zM7 29h1v1h-1zM35 29h3v1h-3zM9 30h2v2h-1v-1h-1zM12 30h1v1h-1zM23 30h2v1h-1v1h-1zM30 30v3h3v-3zM1 31h7v7h-7zM16 31h2v1h-1v1h-1v1h2v1h-2v2h-3v1h-1v-1h-2v-1h-1v-4h1v1h1v1h1v1h-1v1h1v-1h1v-2h1v3h1v-3h-1v-1h2zM19 31h1v1h-1zM31 31h1v1h-1zM36 31h2v7h-3v-1h2v-1h-2v1h-1v-2h3v-2h-1zM2 32v5h5v-5zM21 32h1v1h2v1h-1v1h-1v-1h-1zM24 32h2v1h-2zM3 33h3v3h-3zM19 33h1v1h-1zM26 33h1v1h-1zM35 33h1v1h-1zM24 34h2v1h-2zM27 34h1v1h1v1h-3v-1h1zM21 35h1v1h-1zM30 35h1v1h1v2h-2v-1h-1v-1h1zM32 35h1v1h-1zM17 36h1v1h2v1h-3zM22 36h4v1h3v1h-4v-1h-3zM9 37h1v1h-1zM21 37h1v1h-1zM33 37h1v1h-1z"></path></svg>
										</div>
										<span><img src="https://dev.lynked.world/themes/frontend/images/qrcode-logo.png"></span>
									</div>
									<script src="js/jquery.min.js"></script>
									<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.0/socket.io.js"></script>
									<script>
										$(document).ready(function(){
											var csocket = io('https://dev.lynked.world:2087');
											var csocket_id = '';
											csocket.on('connect', function () {
												console.log('connected');
												csocket_id = csocket.id;
												//alert(csocket_id);
												get_qr(csocket_id);
											});
											
											var user_id = "0";
											var socket_id = '';
											csocket.on('connect', function (sockete_data) {
												socket_id = csocket.id;
												csocket.emit('connect_io',{socket_id:socket_id});
											});
											
											csocket.on("received_p_msg",function(req_socket){
												//console.log("IN -->>> ", req_socket);
												$.ajax({
													url: 'https://dev.lynked.world/AttemptQRLogin',
													origin: '*',
													dataType: 'json',
													type: 'POST',
													contentType: 'application/json',
													data: JSON.stringify(req_socket['user_req']),
													processData: false,
													success: function( data, textStatus, jQxhr ){
														/* session check and adding */
														//window.location.href
														/* $("<div class='form-holder'>" +
														"<form name='input' action='#' method='get'>" +
														"<input type='hidden' name='email' /><br/><br/>" +
														"<input type='hidden' name='qr_type' /><br/><br/>" +
														"<input type='submit' value='New' />" +
														"</form>" +
														"</div>").appendTo('#lw_login_qr'); */
														//console.log(JSON.stringify(data));
														login_call_qr(data.users);
														//window.location.href = '/';
													},
													error: function( jqXhr, textStatus, errorThrown ){
														console.log( errorThrown );
													}
												});
											});
										});
										
										function get_qr(user_socket_id){
										  $.ajax({
											  url: 'https://dev.lynked.world/qr_code',
											  origin: '*',
											  dataType: 'json',
											  type: 'POST',
											  contentType: 'application/json',
											  data: JSON.stringify( { "socket_id": user_socket_id } ),
											  processData: false,
											  success: function( data, textStatus, jQxhr ){
												$(".qr_code").html(data.qr);
												setTimeout(function(){
													get_qr(user_socket_id);
												}, 15000);
											  },
											  error: function( jqXhr, textStatus, errorThrown ){
												  console.log( "error: ", errorThrown );
											  },
												//beforeSend: setHeader
											});
										}
										 var is_login_call = true;
										function login_call_qr(data){
										if(is_login_call == true){
											is_login_call = false;
												$.ajax({
													url: '/login_qr',
													type: 'POST',
													data: { "user_id": data.id,
															"name": data.name,
															"loginid": data.loginid,
															"qr_login": "1"
														},
													success: function( data, textStatus, jQxhr ){
														//alert(JSON.stringify(data));
														is_login_call = true;
														window.location.href = '/userorders';
													},
													error: function( jqXhr, textStatus, errorThrown ){
														is_login_call = true;
														console.log( "error: ", errorThrown );
													}
												});
											}
										}
										
										/* function setHeader(xhr) {
											var token = '123';
											xhr.setRequestHeader('Authorization', token);
										} */
									</script>
								</div>
								<!-- Login with LW QR End -->

								<div class="text-center">OR</div>

                                <div class="form-group">
                                    <input type="email" name="email" class="form-control mail-field" required="required" placeholder="Email"> 
                                </div>
                                <div class="form-group">
                                    <input type="password" name="password" class="form-control password-field" required="required" placeholder="Password"> 
                                </div>
                                <p class="float-right">Forgot password? <a href="/forgot">Remind</a></p>

                                <div class="clearfix"></div>
                                <div class="g-recaptcha" data-sitekey="6Lf-ZEUUAAAAAPtYfUgJHIG1_0xwpHcPIBDDdqqq"></div>
                                <div class="auth-bottom">
                                    <button class="btn btn-primary buy-tokens">Sign In </button>
                                    <div class="auth-text-line last-line">Don't have an account? <a href="/signup">Signup</a></div>
                                </div>

                         </form>
             
                         <br>
                  
                        <% if ( messages.info) { %>
                                <div class="alert alert-primary no-border">
                                    <button type="button" class="close" data-dismiss="alert"><span>&times;</span><span class="sr-only">Close</span></button>
                                    <span class="text-semibold"><%= messages.info %>
                                </div>
                        <% } %>

                        <% if ( messages.error) { %>
                                <div class="alert alert-danger no-border">
                                    <button type="button" class="close" data-dismiss="alert"><span>&times;</span><span class="sr-only">Close</span></button>
                                    <span class="text-semibold"><%= messages.error %>
                                </div>

                        <% } %>

                        <% if ( messages.success) { %>
                                <div class="alert alert-success no-border">
                                    <button type="button" class="close" data-dismiss="alert"><span>&times;</span><span class="sr-only">Close</span></button>
                                    <span class="text-semibold"><%= messages.success %>
                                </div>

                        <% } %>

                          </div>

                        
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/custom.js"></script>
</body>

</html>